# 项目整体概览

> **难度**：🟢 简单（零基础友好）
>
> **阅读时间**：10 分钟

---

## 📌 这个项目是什么？

这是一个 **实时英语口语对话练习应用**（AI English Coach），让你可以通过语音和 AI 教练进行实时对话来练习英语口语。

### 用人话说就是：

1. 你打开网页
2. 点击"开始对话"按钮
3. 用麦克风和 AI 用英语聊天
4. AI 实时回复你，还能纠正发音和语法
5. 所有对话都有文字记录

**类比**：就像微信语音聊天，但对方是一个永远有耐心的英语老师。

---

## 🎯 解决什么问题？

### 传统英语口语练习的痛点：

❌ **找不到练习对象**
- 没有外国朋友
- 线下课程太贵
- 语伴时间不好协调

❌ **缺乏即时反馈**
- 不知道发音对不对
- 不知道语法错误
- 没人指出表达不地道

❌ **心理压力大**
- 害怕说错被笑话
- 紧张导致发挥失常

### 本项目的解决方案：

✅ **24/7 随时可用**
- 打开浏览器就能练
- 不用预约、不用等待

✅ **实时智能反馈**
- AI 实时理解你说的话
- 智能纠正错误
- 提供更好的表达方式

✅ **零心理压力**
- 对着 AI 练习，不用担心被评判
- 说错了可以随时重来
- 完全私密的学习环境

---

## 🏗️ 核心功能介绍

### 1️⃣ 实时语音对话

```
你说话（麦克风） → AI 实时听懂 → AI 语音回复 → 你听到回复
                         ↓
                    文字实时显示
```

**技术实现**：使用 WebRTC 实时音视频技术 + OpenAI Realtime API

### 2️⃣ 文字实时转录

- 你说的话实时转成文字（像微信语音转文字）
- AI 说的话也实时显示文字
- 方便复习和学习

### 3️⃣ 会话历史管理

- 每次对话自动保存
- 可以查看历史对话记录
- 随时复习之前聊过的内容

### 4️⃣ 智能教学功能

- AI 会根据你的水平调整难度
- 主动纠正语法错误
- 教你更地道的表达方式
- 可以要求 AI 用中文解释

### 5️⃣ 多种语音选择

- 男声/女声可选
- 不同口音可选（美式、英式等）
- 语速可调节

---

## 💻 技术栈简介（用人话解释）

### 前端技术（用户看到和交互的部分）

| 技术 | 是什么？ | 为什么用它？ |
|------|----------|--------------|
| **Next.js 15** | React 的增强框架 | 让网页更快、SEO 更好 |
| **React 19** | 构建用户界面的库 | 目前最流行的前端框架 |
| **TypeScript 5** | JavaScript 的超集 | 提供类型检查，减少 bug |
| **Tailwind CSS** | CSS 框架 | 快速写样式，代码更简洁 |
| **Radix UI** | 无障碍 UI 组件库 | 高质量、可定制的 UI 组件 |

### 核心技术（让功能工作的关键）

| 技术 | 是什么？ | 做什么用？ |
|------|----------|------------|
| **WebRTC** | 实时通信技术 | 实现浏览器和服务器的实时音频传输 |
| **OpenAI Realtime API** | OpenAI 的实时 API | 提供实时语音识别和对话能力 |
| **Web Audio API** | 浏览器音频 API | 处理音频流、计算音量 |

### 后端技术（服务器端）

| 技术 | 是什么？ | 做什么用？ |
|------|----------|------------|
| **Next.js API Routes** | Next.js 的服务器端功能 | 处理 API 请求 |
| **服务器代理** | 中转服务器 | 解决国内访问 OpenAI 的问题 |

### 部署技术（让网站上线）

| 技术 | 是什么？ | 做什么用？ |
|------|----------|------------|
| **阿里云 ECS** | 云服务器 | 运行应用的地方（新加坡） |
| **Nginx** | Web 服务器 | 处理 HTTP 请求、反向代理 |
| **PM2** | Node.js 进程管理器 | 保持应用持续运行 |
| **SSL (Let's Encrypt)** | HTTPS 证书 | 加密传输、保护隐私 |

---

## 📂 项目文件结构（简化版）

```
realtime-english-teacher/
├── app/                        # 应用核心
│   ├── layout.tsx             # 全局布局（每个页面共用的部分）
│   ├── page.tsx               # 主页面（用户看到的主界面）
│   └── api/                   # 服务器端 API
│       ├── realtime/          # WebRTC 代理 API
│       └── session/           # 会话管理 API
│
├── components/                 # UI 组件（界面的各个部分）
│   ├── chat-layout.tsx        # 聊天布局
│   ├── conversation-sidebar.tsx  # 历史对话侧边栏
│   ├── voice-control-panel.tsx   # 语音控制面板
│   └── ui/                    # 基础 UI 组件（按钮、对话框等）
│
├── hooks/                      # 自定义 Hooks（业务逻辑）
│   ├── use-webrtc.ts          # ⭐ WebRTC 核心逻辑
│   └── use-session-manager.ts # ⭐ 会话管理逻辑
│
├── lib/                        # 工具库
│   ├── conversations.ts       # ⭐ 会话数据模型
│   ├── tools.ts               # AI 工具定义
│   └── utils.ts               # 通用工具函数
│
├── config/                     # 配置文件
│   ├── coach-instructions.ts  # ⭐ AI 教练提示词
│   └── site.ts                # 网站配置
│
├── types/                      # TypeScript 类型定义
│   └── index.ts               # 所有类型定义
│
├── public/                     # 静态资源（图片、图标等）
│
└── docs/                       # 项目文档
    └── code-explanations/     # 👈 你正在阅读的文档
```

**⭐ 标记的是最重要的文件**

---

## 🔄 应用工作流程（从用户视角）

### 用户操作流程

```
1. 用户打开网页
   ↓
2. 浏览器加载应用
   ↓
3. 用户点击"开始对话"
   ↓
4. 应用请求麦克风权限
   ↓
5. 建立 WebRTC 连接
   ↓
6. 用户开始说话
   ↓
7. 声音传输到 OpenAI
   ↓
8. OpenAI 实时转录 + 理解
   ↓
9. AI 生成回复
   ↓
10. 用户听到 AI 语音回复
    ↓
11. 文字实时显示在屏幕上
    ↓
12. 对话继续...
    ↓
13. 用户点击"结束对话"
    ↓
14. 会话保存到历史记录
```

### 技术流程（简化版）

```
浏览器前端 ←→ 服务器代理 ←→ OpenAI Realtime API
    ↓              ↓
LocalStorage   环境变量
(会话历史)   (API Key)
```

---

## 🌟 核心创新点

### 1. 服务器端代理架构

**问题**：中国大陆无法直接访问 OpenAI API

**解决方案**：
```
用户浏览器 → 新加坡服务器 → OpenAI API
                   ↑
              API Key 存在这里
              (用户看不到)
```

**优势**：
- ✅ 用户无需翻墙
- ✅ API Key 不暴露
- ✅ 服务器在新加坡，速度快

### 2. 三层会话隔离机制

**问题**：防止不同对话之间的消息泄漏

**解决方案**：
1. **WebRTC 层**：停止会话时清空历史
2. **同步层**：检查归档状态
3. **应用层**：新会话时清空旧数据

**结果**：每次新对话都是独立的，不会包含上次的内容

### 3. 实时转录显示

**问题**：传统语音对话没有文字反馈

**解决方案**：
- 实时显示临时转录（正在说的话）
- 说完后显示最终转录（确认的文字）
- 区分用户和 AI 的消息

**结果**：用户可以看到自己说了什么，方便学习

---

## 📊 数据流动图

```
┌─────────────────────────────────────────────────────────────┐
│                        用户浏览器                            │
├─────────────────────────────────────────────────────────────┤
│                                                              │
│  麦克风 → WebRTC → 实时音频流                               │
│    ↓                    ↓                                    │
│  音量可视化        服务器代理 → OpenAI Realtime API         │
│    ↓                    ↓                ↓                   │
│  波形显示          转录文字 ← AI 回复音频                   │
│                         ↓                ↓                   │
│                    UI 显示文字      浏览器播放               │
│                         ↓                                    │
│                   LocalStorage                               │
│                   (保存会话历史)                             │
│                                                              │
└─────────────────────────────────────────────────────────────┘
```

---

## 🎓 学习建议

### 如果你是零基础

1. **先理解项目功能**
   - 自己使用一下这个应用
   - 感受每个功能是做什么的

2. **学习基础概念**
   - 什么是前端/后端？
   - 什么是 API？
   - 什么是组件？

3. **循序渐进**
   - 不要急于理解所有代码
   - 先看简单的配置文件
   - 再看复杂的业务逻辑

### 如果你有编程基础

1. **重点关注**
   - WebRTC 实现细节
   - 会话管理机制
   - 服务器代理架构

2. **思考设计**
   - 为什么这样设计？
   - 有没有更好的方案？
   - 如果是你会怎么实现？

---

## 🔗 相关资源

### 项目文档
- [README.md](../../../README.md) - 项目说明
- [CLAUDE.md](../../../CLAUDE.md) - 开发指南
- [DEVELOPMENT-WORKFLOW.md](../../../DEVELOPMENT-WORKFLOW.md) - 工作流程

### 技术文档
- [Next.js 官方文档](https://nextjs.org/docs)
- [React 官方文档](https://react.dev/)
- [OpenAI Realtime API](https://platform.openai.com/docs/api-reference/realtime)
- [WebRTC 教程](https://webrtc.org/getting-started/overview)

---

## ❓ 常见问题

### Q1: 我完全不懂编程，能看懂吗？

**A**: 可以！本文档就是为零基础准备的。建议：
1. 先阅读入门部分
2. 遇到不懂的术语查看术语表
3. 不要急，慢慢来

### Q2: 需要什么前置知识？

**A**: 理想情况下：
- 基础：HTML、CSS、JavaScript
- 进阶：React、TypeScript
- 但即使不懂，也可以通过本文档学习

### Q3: 学完能做什么？

**A**: 你将能够：
- 理解完整的 Web 应用是如何构建的
- 掌握 React、Next.js、TypeScript
- 了解 WebRTC 实时通信
- 学会部署 Web 应用

### Q4: 要多久才能全部看完？

**A**: 根据基础不同：
- 零基础：2-4 周（每天 2-3 小时）
- 有基础：1-2 周
- 专业开发者：2-3 天快速通读

---

## ⏭️ 下一步

阅读完本文后，建议继续：

1. [**架构图和核心概念**](./02-architecture.md) - 可视化理解系统架构
2. [**学习路径建议**](./03-learning-path.md) - 制定个性化学习计划
3. [**术语表**](../11-glossary/01-terms-and-concepts.md) - 查阅专业术语

---

**准备好了吗？让我们开始深入学习吧！** 🚀
